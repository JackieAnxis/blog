<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Jiacheng Pan&#39;s Blog">
  <meta name="keyword" content>
  <!-- <link rel="shortcut icon" href="/blog/img/favicon.ico"> -->
  <link rel="shortcut icon" href="https://avatars2.githubusercontent.com/u/19246028?s=460&amp;u=8d4f9462069e17c42c9f7e460369ac703146ceb9&amp;v=4">

  <title>
     æ‚è°ˆï¼šPythonå…¥é—¨å­¦ä¹ ç¬”è®°åŸºç¡€ - Jiacheng Pan&#39;s Blog 
  </title>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/blog/css/aircloud.css"> <link rel="stylesheet" href="/blog/css/gitment.css">
  <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
  <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
  <!-- ga & ba script hoook -->
  <script></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> ğŸ¶ ç”Ÿå‘½å› ä½ è€Œç«çƒ­ ğŸ’¯ </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        <div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <a href="http://panjiacheng.site"><img
                    src="https://avatars2.githubusercontent.com/u/19246028?s=460&amp;u=8d4f9462069e17c42c9f7e460369ac703146ceb9&amp;v=4" /></a>
        </div>
        <div class="name">
            <a href="http://panjiacheng.site">
                <i>Jiacheng Pan</i>
            </a>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <!-- <li >
                <a
                    href="http://panjiacheng.site">
                    <i class="iconfont icon-shouye2"></i>
                    <span>ğŸ¡&nbsp;&nbsp;ä¸»é¡µ</span>
                </a>
            </li> -->
            <li >
                <a href="/blog/">
                    <!-- <i class="iconfont icon-guidang1"></i> -->
                    <span>âŒ¨ï¸&nbsp;&nbsp;åšå®¢</span>
                </a>
            </li>
            <li >
                <a href="/blog/author">
                    <!-- <i class="iconfont icon-guanyu2"></i> -->
                    <span>ğŸ“¦&nbsp;&nbsp;åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/blog/tags">
                    <!-- <i class="iconfont icon-biaoqian1"></i> -->
                    <span>ğŸ“Œ&nbsp;&nbsp;æ ‡ç­¾</span>
                </a>
            </li>
            <li >
                <a href="/blog/archives">
                    <!-- <i class="iconfont icon-guidang"></i> -->
                    <span>ğŸ“…&nbsp;&nbsp;æ—¶é—´</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <!-- <i class="iconfont icon-sousuo1"></i> -->
                    <span>ğŸ”&nbsp;&nbsp;æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input" />
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> ğŸ¶ ç”Ÿå‘½å› ä½ è€Œç«çƒ­ ğŸ’¯ </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        <div class="post-container">
    <div class="post-title">
        æ‚è°ˆï¼šPythonå…¥é—¨å­¦ä¹ ç¬”è®°åŸºç¡€
    </div>

    <div class="post-meta">
        <!-- <span
            class="attr">å‘å¸ƒäºï¼š<span>2017-08-21 22:50:00</span></span> -->
        <span class="attr">å‘å¸ƒäºï¼š<span>2017-08-21</span></span>
        <span class="attr"><a class="tag" href="/blog/author/#Gossip"
                title="Gossip">Gossip</a></span>
        
        <span class="attr">/
            
            <a class="tag" href="/blog/tags/#Course Notes" title="Course Notes">Course Notes</a>
            <span>/</span>
            
            <a class="tag" href="/blog/tags/#Coding" title="Coding">Coding</a>
            <span>/</span>
            
            
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
        </span>
        </span>
    </div>
    <div class="post-content ">
        <h1 id="Python-å­¦ä¹ ç¬”è®°åŸºç¡€"><a href="#Python-å­¦ä¹ ç¬”è®°åŸºç¡€" class="headerlink" title="Python å­¦ä¹ ç¬”è®°åŸºç¡€"></a>Python å­¦ä¹ ç¬”è®°åŸºç¡€</h1><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><ol>
<li>è¯­æ³•</li>
</ol>
<ul>
<li><code>#</code>å¼€å¤´ï¼Œæ³¨é‡Š</li>
<li>ç¼©è¿›çš„è¯­å¥è§†ä¸ºä»£ç å—</li>
<li>å¤§å°å†™æ•æ„Ÿ</li>
</ul>
<ol>
<li><p>æ•°æ®ç±»å‹å’Œå˜é‡</p>
<ul>
<li><code>True</code>å’Œ<code>False</code>é¦–å­—æ¯å¤§å†™</li>
<li><code>and</code>ã€<code>or</code>å’Œ<code>not</code></li>
<li>ç©ºå€¼ï¼š<code>None</code></li>
</ul>
</li>
<li><p>å­—ç¬¦ä¸²æ ¼å¼åŒ–<code>%</code></p>
<ul>
<li><p><code>%d</code>æ•´æ•°</p>
</li>
<li><p><code>%f</code>æµ®ç‚¹æ•°</p>
</li>
<li><p><code>%s</code>å­—ç¬¦ä¸²</p>
</li>
<li><p><code>%x</code>åå…­è¿›åˆ¶æ•´æ•°</p>
</li>
<li><p>è¡¥ä½</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%2d-%02d'</span> % (<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="string">' 3-01'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.2f'</span> % <span class="number">3.1415926</span></span><br><span class="line"><span class="string">'3.14'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>æ•°ç»„ï¼š<code>list</code>å’Œ<code>tuple</code></p>
<ul>
<li><code>list</code>æ•°ç»„<ul>
<li><code>len(list)</code>å¾—åˆ°é•¿åº¦</li>
<li><code>list[-2]</code>è·å¾—å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ </li>
<li><code>list.append(ele)</code>å¾€ list ä¸­è¿½åŠ å…ƒç´ åˆ°æœ«å°¾</li>
<li><code>list.insert(1, ele)</code>ï¼ŒæŠŠå…ƒç´ æ’å…¥åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œæ¯”å¦‚ç´¢å¼•å·ä¸º<code>1</code>çš„ä½ç½®</li>
<li><code>list.pop()</code>ï¼Œåˆ é™¤ list æœ«å°¾çš„å…ƒç´ ï¼Œç”¨<code>pop()</code>æ–¹æ³•</li>
<li><code>list.pop(i)</code>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œç”¨<code>pop(i)</code>æ–¹æ³•ï¼Œå…¶ä¸­<code>i</code>æ˜¯ç´¢å¼•ä½ç½®</li>
<li>å…ƒç´ çš„æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥ä¸åŒï¼Œ<code>L = [&#39;Apple&#39;, 123, True]</code></li>
</ul>
</li>
<li><code>tuple</code>æ•°ç»„ï¼š<code>classmates = (&#39;Michael&#39;, &#39;Bob&#39;, &#39;Tracy&#39;)</code><ul>
<li><code>tuple</code>ä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½ä¿®æ”¹ï¼Œä»£ç æ›´å®‰å…¨</li>
</ul>
</li>
</ul>
</li>
<li><p>æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯</p>
<ul>
<li><p><code>if</code> <code>elif</code> <code>else</code></p>
</li>
<li><p><code>for in</code></p>
</li>
<li><p><code>while</code></p>
</li>
<li><p><code>range()</code>å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">1</span>,<span class="number">5</span>) <span class="comment">#ä»£è¡¨ä»1åˆ°5(ä¸åŒ…å«5)</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>) <span class="comment">#ä»£è¡¨ä»1åˆ°5ï¼Œé—´éš”2(ä¸åŒ…å«5)</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>range(<span class="number">5</span>) <span class="comment">#ä»£è¡¨ä»0åˆ°5(ä¸åŒ…å«5)</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>raw_inpit(str)</code>è¯»å–çš„å†…å®¹æ°¸è¿œä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›</p>
</li>
</ul>
</li>
<li><p><code>dict</code>å’Œ<code>set</code></p>
<ul>
<li><p><code>dict</code>å°±æ˜¯<code>map</code>ï¼Œç”¨ key-value çš„å½¢å¼å­˜å‚¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">'Michael'</span>: <span class="number">95</span>, <span class="string">'Bob'</span>: <span class="number">75</span>, <span class="string">'Tracy'</span>: <span class="number">85</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ ¹æ®<code>key</code>è·å¾—<code>value</code></p>
<ul>
<li><code>[]</code>ï¼šä¸€æ—¦<code>key</code>ä¸å­˜åœ¨å°±ä¼šæŠ¥é”™</li>
<li><code>get()</code>å‡½æ•°ï¼šå¦‚æœ key ä¸å­˜åœ¨ï¼Œå¯ä»¥è¿”å› Noneï¼Œæˆ–è€…è‡ªå·±æŒ‡å®šçš„ valueï¼ˆä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼‰</li>
</ul>
</li>
<li><p><code>set</code>æ˜¯ä¸€ç»„ key çš„é›†åˆï¼Œä½†ä¸å­˜å‚¨ valueï¼Œkey ä¸èƒ½é‡å¤ã€‚</p>
<ul>
<li>éœ€è¦ list ä½œä¸ºè¾“å…¥</li>
<li><code>add(key)</code>å‡½æ•°ç”¨æ¥å¾€é‡Œé¢æ·»åŠ å…ƒç´ ï¼Œè‡ªåŠ¨å¿½ç•¥é‡å¤</li>
<li><code>remove(key)</code>å‡½æ•°ç”¨æ¥åˆ é™¤å…ƒç´ </li>
<li><code>&amp;</code>æ“ä½œç”¨æ¥åšäº¤é›†</li>
<li><code>|</code>æ“ä½œç”¨æ¥åšå¹¶é›†</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ol>
<li><p>Python å†…ç½®æ•°æ®ç±»å‹è½¬æ¢å‡½æ•°ï¼šå¦‚<code>int()</code></p>
</li>
<li><p>Python å¯ä»¥ç»™å‡½æ•°èµ‹åˆ«åï¼Œå¦‚ï¼š<code>a = abs</code></p>
</li>
<li><p>å®šä¹‰å‡½æ•°ï¼Œ<code>def</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">	<span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">		<span class="keyword">return</span> x</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰<code>return</code>è¯­å¥ï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åä¹Ÿä¼šè¿”å›ç»“æœï¼Œåªæ˜¯ç»“æœä¸º<code>None</code>ã€‚<code>return None</code>å¯ä»¥ç®€å†™ä¸º<code>return</code>ã€‚</p>
</li>
<li><p>ç©ºå‡½æ•°ï¼Œ<code>pass</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nop</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç±»å‹æ£€æŸ¥ï¼Œ<code>isinstance</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(x, (int, float)):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">'bad operand type'</span>)</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure>
</li>
<li><p>Python å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(x, y, step, angle=<span class="number">0</span>)</span>:</span></span><br><span class="line">    nx = x + step * math.cos(angle)</span><br><span class="line">    ny = y - step * math.sin(angle)</span><br><span class="line">    <span class="keyword">return</span> nx, ny</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x, y = move(<span class="number">100</span>, <span class="number">100</span>, <span class="number">60</span>, math.pi / <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> x, y</span><br><span class="line"><span class="number">151.961524227</span> <span class="number">70.0</span></span><br></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šï¼Œå®ƒå¹¶æ²¡æœ‰è¿”å›å¤šä¸ªå€¼ï¼Œè€Œæ˜¯è¿”å›äº†ä¸€ä¸ª tuple</p>
</li>
<li><p>Python å…·æœ‰é»˜è®¤å‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(x, n=<span class="number">2</span>)</span>:</span></span><br><span class="line">    s = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        n = n - <span class="number">1</span></span><br><span class="line">        s = s * x</span><br><span class="line">    <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure>
<p><strong>é»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡</strong>ï¼Œä¸ç„¶é»˜è®¤å‚æ•°å°±ä¼šä¸æ–­å˜åŒ–ï¼Œä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_end</span><span class="params">(L=[])</span>:</span></span><br><span class="line">    L.append(<span class="string">'END'</span>)</span><br><span class="line">    <span class="keyword">return</span> L</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>, <span class="string">'END'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_end()</span><br><span class="line">[<span class="string">'END'</span>, <span class="string">'END'</span>, <span class="string">'END'</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯å˜å‚æ•°ï¼Œ<code>*</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*numbers)</span>:</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        sum = sum + n * n</span><br><span class="line">    <span class="keyword">return</span> sum</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc()</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œå‚æ•°<code>numbers</code>æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ª tupleã€‚</p>
<p>å¦‚æœå·²ç»æœ‰ä¸€ä¸ª list æˆ–è€… tupleï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc(*nums)</span><br><span class="line"><span class="number">14</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å…³é”®å­—å‚æ•°ï¼š<code>**</code>ï¼Œä¼šæŠŠå¤šä¸å‚æ•°è‡ªåŠ¨ç»„è£…æˆä¸€ä¸ª<code>dict</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Michael'</span>, <span class="number">30</span>)</span><br><span class="line">name: Michael age: <span class="number">30</span> other: &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Bob'</span>, <span class="number">35</span>, city=<span class="string">'Beijing'</span>)</span><br><span class="line">name: Bob age: <span class="number">35</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Adam'</span>, <span class="number">45</span>, gender=<span class="string">'M'</span>, job=<span class="string">'Engineer'</span>)</span><br><span class="line">name: Adam age: <span class="number">45</span> other: &#123;<span class="string">'gender'</span>: <span class="string">'M'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>kw = &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Jack'</span>, <span class="number">24</span>, **kw)</span><br><span class="line">name: Jack age: <span class="number">24</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼š<strong>å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°</strong></p>
</li>
</ol>
<h2 id="é«˜çº§ç‰¹æ€§"><a href="#é«˜çº§ç‰¹æ€§" class="headerlink" title="é«˜çº§ç‰¹æ€§"></a>é«˜çº§ç‰¹æ€§</h2><h3 id="åˆ‡ç‰‡ï¼ˆSlice-ï¼‰"><a href="#åˆ‡ç‰‡ï¼ˆSlice-ï¼‰" class="headerlink" title="åˆ‡ç‰‡ï¼ˆSlice ï¼‰"></a>åˆ‡ç‰‡ï¼ˆSlice ï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Michael'</span>, <span class="string">'Sarah'</span>, <span class="string">'Tracy'</span>, <span class="string">'Bob'</span>, <span class="string">'Jack'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Sarah'</span>, <span class="string">'Tracy'</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>L[0:3]</code>è¡¨ç¤ºï¼Œä»ç´¢å¼• 0 å¼€å§‹å–ï¼Œç›´åˆ°ç´¢å¼• 3 ä¸ºæ­¢ï¼Œä½†ä¸åŒ…æ‹¬ç´¢å¼• 3ã€‚å³ç´¢å¼• 0ï¼Œ1ï¼Œ2ï¼Œæ­£å¥½æ˜¯ 3 ä¸ªå…ƒç´ ã€‚</li>
<li>å¦‚æœç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯ 0ï¼Œè¿˜å¯ä»¥çœç•¥ã€‚</li>
<li><code>L[-1]</code>å–å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿæ”¯æŒå€’æ•°åˆ‡ç‰‡ï¼š<code>L(-2:)</code></li>
<li>åªå†™<code>[:]</code>å°±å¯ä»¥åŸæ ·å¤åˆ¶ä¸€ä¸ª list</li>
<li><code>L[:10:2]</code>è¡¨ç¤ºå‰åä¸ªå…ƒç´ ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼š<code>[0,2,4,6,8]</code></li>
<li>tuple ä¹Ÿå¯ä»¥ç”¨åˆ‡ç‰‡ï¼Œæ“ä½œç»“æœä¹Ÿæ˜¯ tuple</li>
<li>å­—ç¬¦ä¸²ä¹Ÿæ”¯æŒåˆ‡ç‰‡</li>
</ul>
<h3 id="è¿­ä»£ï¼ˆIterationï¼‰"><a href="#è¿­ä»£ï¼ˆIterationï¼‰" class="headerlink" title="è¿­ä»£ï¼ˆIterationï¼‰"></a>è¿­ä»£ï¼ˆIterationï¼‰</h3><ul>
<li><p>åªè¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼ˆlistï¼Œtupleï¼Œdictï¼Œsetï¼Œå­—ç¬¦ä¸²ï¼‰éƒ½å¯ä»¥ç”¨<code>for...in...</code>è¿­ä»£</p>
</li>
<li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œdict è¿­ä»£çš„æ˜¯ keyã€‚</p>
<ul>
<li>å¦‚æœè¦è¿­ä»£ valueï¼Œå¯ä»¥ç”¨<code>for value in d.itervalues()</code></li>
<li>å¦‚æœè¦åŒæ—¶è¿­ä»£ key å’Œ valueï¼Œå¯ä»¥ç”¨<code>for k, v in d.iteritems()</code>ã€‚</li>
</ul>
</li>
<li><p>åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line">isinstance(<span class="string">'abc'</span>, Iterable) <span class="comment"># stræ˜¯å¦å¯è¿­ä»£ True</span></span><br><span class="line">isinstance([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], Iterable) <span class="comment"># listæ˜¯å¦å¯è¿­ä»£ True</span></span><br><span class="line">isinstance(<span class="number">123</span>, Iterable) <span class="comment"># æ•´æ•°æ˜¯å¦å¯è¿­ä»£ False</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‹¥æœ‰ä¸‹æ ‡çš„å¾ªç¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]):</span><br><span class="line">	<span class="keyword">print</span> i, value</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>for</code>å¾ªç¯åŒæ—¶å¼•ç”¨ä¸¤ä¸ªå˜é‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">9</span>)]:</span><br><span class="line">	<span class="keyword">print</span> x, y</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList-Comprehensionsï¼‰"><a href="#åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList-Comprehensionsï¼‰" class="headerlink" title="åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList Comprehensionsï¼‰"></a>åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList Comprehensionsï¼‰</h3><ul>
<li><code>[x * x for x in range(1, 11)]</code>â†’<code>[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</code></li>
<li>åŠ ä¸Šåˆ¤æ–­ï¼š<code>[x * x for x in range(1, 11) if x % 2 == 0]</code>â†’<code>[4, 16, 36, 64, 100]</code></li>
<li>ä¸¤å±‚å¾ªç¯ï¼ˆå¯ä»¥ç”¨æ¥ç”Ÿæˆå…¨æ’åˆ—ï¼‰ï¼š<code>[m + n for m in &#39;ABC&#39; for n in &#39;XYZ&#39;]</code>â†’<code>[&#39;AX&#39;, &#39;AY&#39;, &#39;AZ&#39;, &#39;BX&#39;, &#39;BY&#39;, &#39;BZ&#39;, &#39;CX&#39;, &#39;CY&#39;, &#39;CZ&#39;]</code></li>
</ul>
<h3 id="ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰"><a href="#ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰" class="headerlink" title="ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰"></a>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</h3><p>ç”Ÿæˆå™¨é‡Œé¢è£…äº†ç”¨æ¥ç”Ÿæˆä¸€ä¸ª list çš„ç®—æ³•ï¼Œè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„ listï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ï¼Œä¸€è¾¹å¾ªç¯ï¼Œä¸€è¾¹è®¡ç®—ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">3</span>))</span><br><span class="line">g.next() <span class="comment"># 0</span></span><br><span class="line">g.next() <span class="comment"># 1</span></span><br><span class="line">g.next() <span class="comment"># 4</span></span><br><span class="line">g.next() <span class="comment"># StopIteration</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç”¨<code>for</code>å¾ªç¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> g:</span><br><span class="line">	<span class="keyword">print</span> n</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å®šä¹‰ generator çš„å¦ä¸€ç§æ–¹æ³•ï¼Œ<code>yield</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># print Fibonacci list</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(max)</span>:</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; max:</span><br><span class="line">        <span class="keyword">print</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ”¹å†™æˆ generatorï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Fibonacci generator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(max)</span>:</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; max:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>fib(<span class="number">6</span>)</span><br><span class="line">&lt;generator object fib at <span class="number">0x104feaaa0</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>generator çš„æ‰§è¡Œé¡ºåºï¼š</p>
<blockquote>
<p>å˜æˆ generator çš„å‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>next()</code>çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°<code>yield</code>è¯­å¥è¿”å›ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä»ä¸Šæ¬¡è¿”å›çš„<code>yield</code>è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 1'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 2'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 3'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional-Programmingï¼‰"><a href="#å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional-Programmingï¼‰" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰"></a>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰</h2><p>Python å¯¹å‡½æ•°å¼ç¼–ç¨‹æä¾›éƒ¨åˆ†æ”¯æŒã€‚ç”±äº Python å…è®¸ä½¿ç”¨å˜é‡ï¼Œå› æ­¤ï¼ŒPython ä¸æ˜¯çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚</p>
<h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><ul>
<li><code>map</code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª list</li>
<li><code>reduce</code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ï¼ˆresult, itemï¼‰</li>
<li><code>filter</code></li>
<li><code>sorted</code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¯”è¾ƒå‡½æ•°ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰</li>
</ul>
<h3 id="è¿”å›å‡½æ•°"><a href="#è¿”å›å‡½æ•°" class="headerlink" title="è¿”å›å‡½æ•°"></a>è¿”å›å‡½æ•°</h3><ul>
<li>Python ä¹Ÿæœ‰é—­åŒ…çš„æ¦‚å¿µ</li>
</ul>
<h3 id="åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰"><a href="#åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰" class="headerlink" title="åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰"></a>åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰</h3><p><code>lambda x: x * x</code>ç­‰åŒäºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x * x</span><br></pre></td></tr></table></figure>
<h3 id="è£…é¥°å™¨ï¼ˆDecoratorï¼‰"><a href="#è£…é¥°å™¨ï¼ˆDecoratorï¼‰" class="headerlink" title="è£…é¥°å™¨ï¼ˆDecoratorï¼‰"></a>è£…é¥°å™¨ï¼ˆDecoratorï¼‰</h3><p><code>@</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call %s():'</span> % func.__name__</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'2017-08-14'</span></span><br></pre></td></tr></table></figure>
<p>ç›¸å½“äºæ‰§è¡Œäº†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now = log(now)</span><br></pre></td></tr></table></figure>
<p>ä½†æ­¤æ—¶ï¼Œ<code>now.__name__</code>å·²ç»è¢«æ›¿æ¢æˆäº†<code>wrapper</code>ï¼Œæ‰€ä»¥å®Œæ•´çš„å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @functools.wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'call %s():'</span> % func.__name__</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>
<h3 id="åå‡½æ•°ï¼ˆPartial-functionï¼‰"><a href="#åå‡½æ•°ï¼ˆPartial-functionï¼‰" class="headerlink" title="åå‡½æ•°ï¼ˆPartial functionï¼‰"></a>åå‡½æ•°ï¼ˆPartial functionï¼‰</h3><p>å¯ä»¥å›ºå®šæŸä¸ªå‚æ•°çš„é»˜è®¤å€¼ï¼Œæ¯”å¦‚ä¸‹æ–¹çš„ä¾‹å­ï¼Œå›ºå®šäº†<code>int</code>å‡½æ•°çš„<code>base</code>å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int2 = functools.partial(int, base=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><p><a href="https://docs.python.org/2/library/functions.html" target="_blank" rel="noopener">Python æ‰€æœ‰å†…ç½®å‡½æ•°</a></p>
<p>æ¨¡å—ï¼šä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—</p>
<p>åŒ…ï¼šå°±æ˜¯ä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œä½†æ¯ä¸ªåŒ…ç›®å½•ä¸‹é¢éƒ½è¦æœ‰ä¸€ä¸ª<code>__init__.py</code>çš„æ–‡ä»¶ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šç›®å½•è€Œä¸æ˜¯ä¸€ä¸ªåŒ…ã€‚<code>__init.__.py</code>å¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰ä»£ç ï¼Œå› ä¸º<code>__init__.py</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒçš„æ¨¡å—åå°±æ˜¯å®ƒçš„çˆ¶ç›®å½•ã€‚æ¯”å¦‚å¦‚ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼š</p>
<p><img src="https://www.liaoxuefeng.com/files/attachments/00138836605526535c9bebcbf414c3dae2430c50bbeef29000/0" alt></p>
<p>æ–‡ä»¶<code>www.py</code>çš„æ¨¡å—åå°±æ˜¯<code>mycompany.web.www</code>ï¼Œä¸¤ä¸ªæ–‡ä»¶<code>utils.py</code>çš„æ¨¡å—ååˆ†åˆ«æ˜¯<code>mycompany.utils</code>å’Œ<code>mycompany.web.utils</code>ã€‚</p>
<h3 id="å¼•å…¥æ¨¡å—"><a href="#å¼•å…¥æ¨¡å—" class="headerlink" title="å¼•å…¥æ¨¡å—"></a>å¼•å…¥æ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">' a test module '</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">'Michael Liao'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    args = sys.argv</span><br><span class="line">    <span class="keyword">if</span> len(args)==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Hello, world!'</span></span><br><span class="line">    <span class="keyword">elif</span> len(args)==<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Hello, %s!'</span> % args[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Too many arguments!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>
<p>ç¬¬ 1 è¡Œå’Œç¬¬ 2 è¡Œæ˜¯æ ‡å‡†æ³¨é‡Šï¼Œç¬¬ 1 è¡Œæ³¨é‡Šå¯ä»¥è®©è¿™ä¸ª<code>hello.py</code>æ–‡ä»¶ç›´æ¥åœ¨ Unix/Linux/Mac ä¸Šè¿è¡Œï¼Œç¬¬ 2 è¡Œæ³¨é‡Šè¡¨ç¤º.py æ–‡ä»¶æœ¬èº«ä½¿ç”¨æ ‡å‡† UTF-8 ç¼–ç ï¼›</p>
<p>ç¬¬ 4 è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ¨¡å—çš„æ–‡æ¡£æ³¨é‡Šï¼Œä»»ä½•æ¨¡å—ä»£ç çš„<strong>ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²</strong>éƒ½è¢«è§†ä¸ºæ¨¡å—çš„æ–‡æ¡£æ³¨é‡Šï¼›</p>
<p>ç¬¬ 6 è¡Œä½¿ç”¨<code>__author__</code>å˜é‡æŠŠä½œè€…å†™è¿›å»ï¼Œè¿™æ ·å½“ä½ å…¬å¼€æºä»£ç ååˆ«äººå°±å¯ä»¥ç»ä»°ä½ çš„å¤§åï¼›</p>
<p><code>sys.argv</code>ç”¨ list å­˜å‚¨äº†å‘½ä»¤è¡Œçš„æ‰€æœ‰å‚æ•°ã€‚<code>python hello.py</code>å¯¹åº”<code>[&#39;hello.py&#39;]</code>ï¼Œ<code>python hello.py Michael</code>å¯¹åº” <code>[&#39;hello.py&#39;, &#39;Michael]</code>ã€‚</p>
<p>æœ€åä¸¤è¡Œï¼šå½“ç”¨å‘½ä»¤è¡Œè¿è¡Œ<code>hello</code>æ¨¡å—æ—¶ï¼ŒPython è§£é‡Šå™¨æŠŠä¸€ä¸ªç‰¹æ®Šå˜é‡<code>__name__</code>ç½®ä¸º<code>__main__</code>ï¼Œè€Œå¦‚æœåœ¨å…¶ä»–åœ°æ–¹å¯¼å…¥è¯¥<code>hello</code>æ¨¡å—æ—¶ï¼Œåˆ™ä¸ä¼šã€‚</p>
<ul>
<li><p>åˆ«åï¼š<code>cStringIO</code>æ˜¯ C å†™çš„ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè¿™æ ·å°±å¯ä»¥ä¼˜å…ˆå¯¼å…¥<code>cStringIO</code>ã€‚å¦‚æœæœ‰äº›å¹³å°ä¸æä¾›<code>cStringIO</code>ï¼Œè¿˜å¯ä»¥é™çº§ä½¿ç”¨<code>StringIO</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> cStringIO <span class="keyword">as</span> StringIO</span><br><span class="line"><span class="keyword">except</span> ImportError: <span class="comment"># å¯¼å…¥å¤±è´¥ä¼šæ•è·åˆ°ImportError</span></span><br><span class="line">    <span class="keyword">import</span> StringIO</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ç±»ä¼¼<code>simplejson</code>è¿™æ ·çš„åº“ï¼Œåœ¨ Python 2.6 ä¹‹å‰æ˜¯ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä» 2.6 å¼€å§‹å†…ç½®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> json <span class="comment"># python &gt;= 2.6</span></span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="keyword">import</span> simplejson <span class="keyword">as</span> json <span class="comment"># python &lt;= 2.5</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½œç”¨åŸŸï¼š</p>
<p>å‰ç¼€<code>_</code>è¡¨ç¤ºç§æœ‰å‡½æ•°ï¼Œ<strong>ä¸åº”è¯¥</strong>è¢«å¤–éƒ¨å¼•ç”¨ã€‚</p>
</li>
</ul>
<h3 id="å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—"><a href="#å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—" class="headerlink" title="å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—"></a>å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h3><p><code>pip</code></p>
<p><code>pip install</code>æ˜¯å…¨å±€å®‰è£…</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython è§£é‡Šå™¨ä¼šæœç´¢å½“å‰ç›®å½•ã€æ‰€æœ‰å·²å®‰è£…çš„å†…ç½®æ¨¡å—å’Œç¬¬ä¸‰æ–¹æ¨¡å—ã€‚æœç´¢è·¯å¾„å­˜æ”¾åœ¨<code>sys</code>æ¨¡å—çš„<code>path</code>å˜é‡ä¸­ï¼Œå¯ä»¥æ·»åŠ è¦æœç´¢çš„ç›®å½•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">'/Users/michael/my_py_scripts'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="future-æ¨¡å—"><a href="#future-æ¨¡å—" class="headerlink" title="__future__æ¨¡å—"></a><code>__future__</code>æ¨¡å—</h3><p>Python æä¾›äº†<code>__future__</code>æ¨¡å—ï¼ŒæŠŠä¸‹ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ç‰¹æ€§å¯¼å…¥åˆ°å½“å‰ç‰ˆæœ¬ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥åœ¨å½“å‰ç‰ˆæœ¬ä¸­æµ‹è¯•ä¸€äº›æ–°ç‰ˆæœ¬çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># still running on Python 2.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'\'xxx\' is unicode?'</span>, isinstance(<span class="string">'xxx'</span>, unicode)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'u\'xxx\' is unicode?'</span>, isinstance(<span class="string">u'xxx'</span>, unicode)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'\'xxx\' is str?'</span>, isinstance(<span class="string">'xxx'</span>, str)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'b\'xxx\' is str?'</span>, isinstance(<span class="string">b'xxx'</span>, str)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'10 / 3 ='</span>, <span class="number">10</span> / <span class="number">3</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'10.0 / 3 ='</span>, <span class="number">10.0</span> / <span class="number">3</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'10 // 3 ='</span>, <span class="number">10</span> // <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h2 id="é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, score)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_score</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'%s: %s'</span> % (self.name, self.score)</span><br><span class="line"></span><br><span class="line">bart = Student(<span class="string">'Bart Simpson'</span>, <span class="number">59</span>)</span><br><span class="line">lisa = Student(<span class="string">'Lisa Simpson'</span>, <span class="number">87</span>)</span><br><span class="line">bart.print_score() <span class="comment"># Bart Simpson: 59</span></span><br><span class="line">lisa.print_score() <span class="comment"># Lisa Simpson: 87</span></span><br></pre></td></tr></table></figure>
<h3 id="ç±»å’Œå®ä¾‹"><a href="#ç±»å’Œå®ä¾‹" class="headerlink" title="ç±»å’Œå®ä¾‹"></a>ç±»å’Œå®ä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, score)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br></pre></td></tr></table></figure>
<p><code>class</code>åé¢ç´§æ¥ç€æ˜¯ç±»åï¼Œå³<code>Student</code>ï¼Œç±»åé€šå¸¸æ˜¯å¤§å†™å¼€å¤´çš„å•è¯ï¼Œç´§æ¥ç€æ˜¯<code>(object)</code>ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯ä»å“ªä¸ªç±»ç»§æ‰¿ä¸‹æ¥çš„ã€‚</p>
<p><code>__init__</code>å‡½æ•°æ˜¯æ„é€ å‡½æ•°ã€‚</p>
<p>å’Œæ™®é€šçš„å‡½æ•°ç›¸æ¯”ï¼Œåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°åªæœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å®ä¾‹å˜é‡<code>self</code>ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨æ—¶ï¼Œä¸ç”¨ä¼ é€’è¯¥å‚æ•°ã€‚</p>
<h3 id="è®¿é—®é™åˆ¶"><a href="#è®¿é—®é™åˆ¶" class="headerlink" title="è®¿é—®é™åˆ¶"></a>è®¿é—®é™åˆ¶</h3><ul>
<li>åœ¨ Python ä¸­ï¼Œå®ä¾‹çš„å˜é‡åå¦‚æœä»¥<code>__</code>å¼€å¤´ï¼Œå°±å˜æˆäº†ä¸€ä¸ªç§æœ‰å˜é‡ï¼ˆprivateï¼‰ï¼Œåªæœ‰å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—®ã€‚</li>
<li>å˜é‡åç±»ä¼¼<code>__xxx__</code>çš„ï¼Œä¹Ÿå°±æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¹¶ä¸”ä»¥åŒä¸‹åˆ’çº¿ç»“å°¾çš„ï¼Œæ˜¯ç‰¹æ®Šå˜é‡ï¼Œç‰¹æ®Šå˜é‡æ˜¯å¯ä»¥ç›´æ¥è®¿é—®çš„ï¼Œä¸æ˜¯ private å˜é‡ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½ç”¨<code>__name__</code>ã€<code>__score__</code>è¿™æ ·çš„å˜é‡åã€‚</li>
<li>ä»¥ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´çš„å®ä¾‹å˜é‡åï¼Œæ¯”å¦‚<code>_name</code>ï¼Œæ„æ€å°±æ˜¯ï¼Œâ€œè™½ç„¶æˆ‘å¯ä»¥è¢«è®¿é—®ï¼Œä½†æ˜¯ï¼Œè¯·æŠŠæˆ‘è§†ä¸ºç§æœ‰å˜é‡ï¼Œä¸è¦éšæ„è®¿é—®â€ã€‚</li>
<li>åŒä¸‹åˆ’çº¿å¼€å¤´çš„å®ä¾‹å˜é‡æ˜¯ä¸æ˜¯ä¸€å®šä¸èƒ½ä»å¤–éƒ¨è®¿é—®å‘¢ï¼Ÿå…¶å®ä¹Ÿä¸æ˜¯ã€‚ä¸èƒ½ç›´æ¥è®¿é—®<code>__name</code>æ˜¯å› ä¸º Python è§£é‡Šå™¨å¯¹å¤–æŠŠ<code>__name</code>å˜é‡æ”¹æˆäº†<code>_Student__name</code>ï¼Œæ‰€ä»¥ï¼Œä»ç„¶å¯ä»¥é€šè¿‡<code>_Student__name</code>æ¥è®¿é—®<code>__name</code>å˜é‡</li>
</ul>
<h3 id="ç»§æ‰¿ä¸å¤šæ€"><a href="#ç»§æ‰¿ä¸å¤šæ€" class="headerlink" title="ç»§æ‰¿ä¸å¤šæ€"></a>ç»§æ‰¿ä¸å¤šæ€</h3><p>OOP çš„ç‰¹æ€§ï¼Œä¸ä½œå¤šä½™è§£é‡Šã€‚</p>
<h3 id="è·å–å¯¹è±¡ä¿¡æ¯"><a href="#è·å–å¯¹è±¡ä¿¡æ¯" class="headerlink" title="è·å–å¯¹è±¡ä¿¡æ¯"></a>è·å–å¯¹è±¡ä¿¡æ¯</h3><ul>
<li><p><code>type()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="number">123</span>)</span><br><span class="line">&lt;type <span class="string">'int'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="string">'str'</span>)</span><br><span class="line">&lt;type <span class="string">'str'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="literal">None</span>)</span><br><span class="line">&lt;type <span class="string">'NoneType'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(abs)</span><br><span class="line">&lt;type <span class="string">'builtin_function_or_method'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">__main__</span>.<span class="title">Animal</span>'&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>types</code>æ¨¡å—<code>types.StringType</code>ã€<code>types.UnicodeType</code>ã€<code>types.ListType</code>ã€<code>types.TypeType</code>(æ‰€æœ‰ç±»å‹æœ¬èº«çš„ç±»å‹å°±æ˜¯<code>TypeType</code>)</p>
</li>
<li><p><code>isinstance()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># object -&gt; Animal -&gt; Dog -&gt; Husky</span></span><br><span class="line">a = Animal()</span><br><span class="line">d = Dog()</span><br><span class="line">h = Husky()</span><br><span class="line"></span><br><span class="line">isinstance(h, Husky)	<span class="comment"># True</span></span><br><span class="line">isinstance(h, Dog)		<span class="comment"># True</span></span><br><span class="line">isinstance(h, Animal)	<span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸäº›ç±»å‹ä¸­çš„ä¸€ç§</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isinstance(<span class="string">'a'</span>, (str, unicode))		<span class="comment"># True</span></span><br><span class="line">isinstance(<span class="string">u'a'</span>, (str, unicode))	<span class="comment"># True</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>dir()</code>ï¼šè·å¾—å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª list</p>
<p>ç±»ä¼¼<code>__xxx__</code>çš„å±æ€§å’Œæ–¹æ³•åœ¨ Python ä¸­éƒ½æ˜¯æœ‰ç‰¹æ®Šç”¨é€”çš„ã€‚æ¯”å¦‚<code>__len__</code>æ–¹æ³•è¿”å›é•¿åº¦ï¼Œå®é™…ä¸Šï¼Œåœ¨<code>len()</code>å‡½æ•°å†…éƒ¨ï¼Œå®ƒè‡ªåŠ¨å»è°ƒç”¨è¯¥å¯¹è±¡çš„<code>__len__()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">obj = MyObject()</span><br><span class="line">len(obj) <span class="comment"># 100</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>hasattr</code>ã€<code>setattr</code>ã€<code>getattr</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hasattr(obj, <span class="string">'x'</span>)		<span class="comment"># æœ‰å±æ€§'x'å—ï¼Ÿ</span></span><br><span class="line">setattr(obj, <span class="string">'y'</span>, <span class="number">19</span>)	<span class="comment"># è®¾ç½®ä¸€ä¸ªå±æ€§'y'</span></span><br><span class="line">getattr(obj, <span class="string">'z'</span>)		<span class="comment"># è·å–å±æ€§'z'</span></span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
<h3 id="slots"><a href="#slots" class="headerlink" title="__slots__"></a><code>__slots__</code></h3><ul>
<li><p>ç»™ class ç»‘å®šæ–°çš„æ–¹æ³•ï¼Œ<code>MethodType</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_score</span><span class="params">(self, score)</span>:</span></span><br><span class="line">	self.score = score</span><br><span class="line"></span><br><span class="line">Student.set_score = MethodType(set_score, <span class="literal">None</span>, Student)</span><br></pre></td></tr></table></figure>
</li>
<li><p>é™åˆ¶ç±»èƒ½æ·»åŠ çš„å±æ€§ï¼Œ<code>__slots</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">	__slots__ = (<span class="string">'name'</span>, <span class="string">'age'</span>) <span class="comment"># ç”¨tupleå®šä¹‰å…è®¸ç»‘å®šçš„å±æ€§åç§°</span></span><br></pre></td></tr></table></figure>
<p>å¯¹å­ç±»ä¸èµ·ä½œç”¨ã€‚</p>
</li>
</ul>
<h3 id="property"><a href="#property" class="headerlink" title="@property"></a><code>@property</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line"><span class="meta">    @score.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value, int):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'score must be an integer!'</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'score must between 0 ~ 100!'</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s = Student()</span><br><span class="line">s.score = <span class="number">60</span>	<span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.set_score(60)</span></span><br><span class="line">s.score			<span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.get_score() 60</span></span><br><span class="line">s.score = <span class="number">9999</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment"># ValueError: score must between 0 ~ 100!</span></span><br></pre></td></tr></table></figure>
<p>ä¸å®šä¹‰ setter çš„è¯ï¼Œå°±æ˜¯ä¸€ä¸ªåªè¯»å±æ€§</p>
<h3 id="å¤šé‡ç»§æ‰¿"><a href="#å¤šé‡ç»§æ‰¿" class="headerlink" title="å¤šé‡ç»§æ‰¿"></a>å¤šé‡ç»§æ‰¿</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Mammal, Runnable)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bat</span><span class="params">(Mammal, Flyable)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="å®šåˆ¶ç±»"><a href="#å®šåˆ¶ç±»" class="headerlink" title="å®šåˆ¶ç±»"></a>å®šåˆ¶ç±»</h3><ul>
<li><p><code>__str__()</code>æ–¹æ³•ç”¨äºè‡ªåŠ¨ç±»å‹è½¬æ¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Student object (name: %s)'</span> % self.name</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>__iter__()</code>ï¼Œé…åˆ<code>next()</code>æ–¹æ³•ï¼Œå¯ä»¥å¯¹ç±»è¿›è¡Œ<code>for...in</code>æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = <span class="number">0</span>, <span class="number">1</span> <span class="comment"># åˆå§‹åŒ–ä¸¤ä¸ªè®¡æ•°å™¨aï¼Œb</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self <span class="comment"># å®ä¾‹æœ¬èº«å°±æ˜¯è¿­ä»£å¯¹è±¡ï¼Œæ•…è¿”å›è‡ªå·±</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = self.b, self.a + self.b <span class="comment"># è®¡ç®—ä¸‹ä¸€ä¸ªå€¼</span></span><br><span class="line">        <span class="keyword">if</span> self.a &gt; <span class="number">100000</span>: <span class="comment"># é€€å‡ºå¾ªç¯çš„æ¡ä»¶</span></span><br><span class="line">            <span class="keyword">raise</span> StopIteration();</span><br><span class="line">        <span class="keyword">return</span> self.a <span class="comment"># è¿”å›ä¸‹ä¸€ä¸ªå€¼</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> Fib():</span><br><span class="line">    <span class="keyword">print</span> n</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>__getitem__()</code>ï¼šå¯ä»¥ç±»ä¼¼ list é‚£æ ·ï¼Œç”¨æ–¹æ‹¬å·<code>[]</code>å–å‡ºå¯¹åº”çš„å…ƒç´ ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> range(n):</span><br><span class="line">            a, b = b, a + b</span><br><span class="line">        <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = Fib()</span><br><span class="line">f[<span class="number">0</span>] 	<span class="comment"># 1</span></span><br><span class="line">f[<span class="number">1</span>] 	<span class="comment"># 1</span></span><br><span class="line">f[<span class="number">10</span>] 	<span class="comment"># 89</span></span><br><span class="line">f[:<span class="number">10</span>]	<span class="comment"># [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span></span><br><span class="line">f[:<span class="number">10</span>:<span class="number">2</span>]	<span class="comment"># æœªå¯¹stepåšå¤„ç†ï¼Œ[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]</span></span><br></pre></td></tr></table></figure>
<p><code>__getitem__()</code>ä¹Ÿæ²¡æœ‰å¯¹è´Ÿæ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p><code>__getitem__()</code>ä¹Ÿå¯ä»¥å°†å¯¹è±¡å¤„ç†æˆä¸€ä¸ª dictï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a, b)</span>:</span></span><br><span class="line">        self.a = a</span><br><span class="line">        self.b = b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="string">'a'</span>:</span><br><span class="line">            <span class="keyword">return</span> self.a</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self.b</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = Test(<span class="string">'aa'</span>, <span class="string">'bb'</span>)</span><br><span class="line"><span class="keyword">print</span> f[<span class="string">'a'</span>] <span class="comment"># 'aa'</span></span><br></pre></td></tr></table></figure>
<p>ä¸ä¹‹å¯¹åº”çš„æ˜¯<code>__setitem__()</code>æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡è§†ä½œ list æˆ– dict æ¥å¯¹é›†åˆèµ‹å€¼ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ª<code>__delitem__()</code>æ–¹æ³•ï¼Œç”¨äºåˆ é™¤æŸä¸ªå…ƒç´ ã€‚</p>
</li>
<li><p><code>__getattr__()</code>ï¼Œç”¨äºå¤„ç†å¯¹è±¡æ²¡æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, attr)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Test doesn\'t have attribute: %s'</span> % attr</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test = Test(<span class="string">'aa'</span>)</span><br><span class="line">test.age	<span class="comment"># Test doesn't have attribute: age</span></span><br></pre></td></tr></table></figure>
<p>åŒæ ·ä¹Ÿå¯ä»¥è¿”å›æ–¹æ³•ã€‚</p>
<p>åªæœ‰åœ¨æ²¡æœ‰æ‰¾åˆ°å±æ€§çš„æƒ…å†µä¸‹ï¼Œæ‰è°ƒç”¨<code>__getattr__</code>ã€‚</p>
</li>
<li><p><code>__call__()</code>ä½¿å¾—å®ä¾‹æœ¬èº«å¯ä»¥ç§°ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, age)</span>:</span></span><br><span class="line">        self.age = age</span><br><span class="line">        print(<span class="string">'My name is %s and my age is %s'</span> % self.name, age)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">student = Student(<span class="string">'Jackie'</span>)</span><br><span class="line">student(<span class="number">25</span>) <span class="comment"># My name is Jackie and my age is 25</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨<code>callbale()</code>æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦èƒ½è¢«è°ƒç”¨ã€‚</p>
</li>
</ul>
<h3 id="å…ƒç±»"><a href="#å…ƒç±»" class="headerlink" title="å…ƒç±»"></a>å…ƒç±»</h3><ul>
<li><p><code>type()</code>ä¸ä»…å¯ä»¥ç”¨æ¥æŸ¥çœ‹æŸä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„ç±»ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(self, name=<span class="string">'world'</span>)</span>:</span> <span class="comment"># å…ˆå®šä¹‰å‡½æ•°</span></span><br><span class="line">	print(<span class="string">'Hello, %s.'</span> % name)</span><br><span class="line"></span><br><span class="line">Hello = type(<span class="string">'Hello'</span>, (object,), dict(hello=fn)) <span class="comment"># åˆ›å»ºHello class</span></span><br><span class="line">h = Hello()</span><br><span class="line">h.hello()	<span class="comment"># Hello, world.</span></span><br><span class="line">print(type(Hello))	<span class="comment"># &lt;type 'type'&gt;</span></span><br><span class="line">print(type(h))	<span class="comment"># &lt;class '__main__.Hello'&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç±»å</li>
<li>ç»§æ‰¿çš„çˆ¶ç±»çš„ tuple</li>
<li>å±æ€§å’Œæ–¹æ³•çš„ dict</li>
</ul>
<p>é€šè¿‡<code>type()</code>å‡½æ•°åˆ›å»ºçš„ç±»å’Œç›´æ¥å†™ class æ˜¯å®Œå…¨ä¸€æ ·çš„</p>
</li>
<li><p><code>metaclass</code>å…ƒç±»ï¼Œæš‚æ—¶ä¸å­¦</p>
</li>
</ul>
<h2 id="é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•"><a href="#é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•" class="headerlink" title="é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•"></a>é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•</h2><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><h4 id="try-except-finally"><a href="#try-except-finally" class="headerlink" title="try...except...finally..."></a><code>try...except...finally...</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'try...'</span></span><br><span class="line">    r = <span class="number">10</span> / int(<span class="string">'a'</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'result:'</span>, r</span><br><span class="line"><span class="keyword">except</span> ValueError, e:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'ValueError:'</span>, e</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError, e: <span class="comment"># å¯ä»¥å†™å¤šæ¡except</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'ZeroDivisionError:'</span>, e</span><br><span class="line"><span class="keyword">else</span>: <span class="comment"># æœªå‡ºé”™å°±ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'no error!'</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'finally...'</span> <span class="comment"># æ— è®ºæ˜¯å¦å‡ºé”™ï¼Œéƒ½ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'END'</span></span><br></pre></td></tr></table></figure>
<p><code>except</code>è¿˜ä¼šæ•è·å¼‚å¸¸çš„å­ç±»ï¼Œæ‰€æœ‰çš„é”™è¯¯ç±»å‹éƒ½ç»§æ‰¿è‡ª<code>BaseException</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨<code>except</code>æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸ä½†æ•è·è¯¥ç±»å‹çš„é”™è¯¯ï¼Œè¿˜æŠŠå…¶å­ç±»ä¹Ÿâ€œä¸€ç½‘æ‰“å°½â€ã€‚</p>
<p><a href="https://docs.python.org/2/library/exceptions.html#exception-hierarchy" target="_blank" rel="noopener">Exception hierarchy å¼‚å¸¸ç»§æ‰¿å…³ç³»</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">BaseException</span><br><span class="line"> +-- SystemExit</span><br><span class="line"> +-- KeyboardInterrupt</span><br><span class="line"> +-- GeneratorExit</span><br><span class="line"> +-- Exception</span><br><span class="line">      +-- StopIteration</span><br><span class="line">      +-- StandardError</span><br><span class="line">      |    +-- BufferError</span><br><span class="line">      |    +-- ArithmeticError</span><br><span class="line">      |    |    +-- FloatingPointError</span><br><span class="line">      |    |    +-- OverflowError</span><br><span class="line">      |    |    +-- ZeroDivisionError</span><br><span class="line">      |    +-- AssertionError</span><br><span class="line">      |    +-- AttributeError</span><br><span class="line">      |    +-- EnvironmentError</span><br><span class="line">      |    |    +-- IOError</span><br><span class="line">      |    |    +-- OSError</span><br><span class="line">      |    |         +-- WindowsError (Windows)</span><br><span class="line">      |    |         +-- VMSError (VMS)</span><br><span class="line">      |    +-- EOFError</span><br><span class="line">      |    +-- ImportError</span><br><span class="line">      |    +-- LookupError</span><br><span class="line">      |    |    +-- IndexError</span><br><span class="line">      |    |    +-- KeyError</span><br><span class="line">      |    +-- MemoryError</span><br><span class="line">      |    +-- NameError</span><br><span class="line">      |    |    +-- UnboundLocalError</span><br><span class="line">      |    +-- ReferenceError</span><br><span class="line">      |    +-- RuntimeError</span><br><span class="line">      |    |    +-- NotImplementedError</span><br><span class="line">      |    +-- SyntaxError</span><br><span class="line">      |    |    +-- IndentationError</span><br><span class="line">      |    |         +-- TabError</span><br><span class="line">      |    +-- SystemError</span><br><span class="line">      |    +-- TypeError</span><br><span class="line">      |    +-- ValueError</span><br><span class="line">      |         +-- UnicodeError</span><br><span class="line">      |              +-- UnicodeDecodeError</span><br><span class="line">      |              +-- UnicodeEncodeError</span><br><span class="line">      |              +-- UnicodeTranslateError</span><br><span class="line">      +-- Warning</span><br><span class="line">           +-- DeprecationWarning</span><br><span class="line">           +-- PendingDeprecationWarning</span><br><span class="line">           +-- RuntimeWarning</span><br><span class="line">           +-- SyntaxWarning</span><br><span class="line">           +-- UserWarning</span><br><span class="line">           +-- FutureWarning</span><br><span class="line">	   +-- ImportWarning</span><br><span class="line">	   +-- UnicodeWarning</span><br><span class="line">	   +-- BytesWarning</span><br></pre></td></tr></table></figure>
<h4 id="logging"><a href="#logging" class="headerlink" title="logging"></a><code>logging</code></h4><p>Python å†…ç½®çš„<code>logging</code>æ¨¡å—å¯ä»¥éå¸¸å®¹æ˜“åœ°è®°å½•é”™è¯¯ä¿¡æ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># err.py</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / int(s)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> foo(s) * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        bar(<span class="string">'0'</span>)</span><br><span class="line">    <span class="keyword">except</span> StandardError, e:</span><br><span class="line">        logging.exception(e)</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"><span class="keyword">print</span> <span class="string">'END'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ python err.py</span><br><span class="line">ERROR:root:<span class="built_in">integer</span> division or modulo by zero</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"err.py"</span>, line 12, <span class="keyword">in</span> main</span><br><span class="line">    bar(<span class="string">'0'</span>)</span><br><span class="line">  File <span class="string">"err.py"</span>, line 8, <span class="keyword">in</span> bar</span><br><span class="line">    <span class="built_in">return</span> foo(s) * 2</span><br><span class="line">  File <span class="string">"err.py"</span>, line 5, <span class="keyword">in</span> foo</span><br><span class="line">    <span class="built_in">return</span> 10 / int(s)</span><br><span class="line">ZeroDivisionError: <span class="built_in">integer</span> division or modulo by zero</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h4 id="è‡ªå·±ç¼–å†™é”™è¯¯"><a href="#è‡ªå·±ç¼–å†™é”™è¯¯" class="headerlink" title="è‡ªå·±ç¼–å†™é”™è¯¯"></a>è‡ªå·±ç¼–å†™é”™è¯¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># err.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooError</span><span class="params">(StandardError)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></span><br><span class="line">    n = int(s)</span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> FooError(<span class="string">'invalid value: %s'</span> % s)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / n</span><br></pre></td></tr></table></figure>
<h4 id="ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸"><a href="#ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸" class="headerlink" title="ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸"></a>ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># err.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></span><br><span class="line">    n = int(s)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / n</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> foo(s) * <span class="number">2</span></span><br><span class="line">    <span class="keyword">except</span> StandardError, e:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Error!'</span></span><br><span class="line">        <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    bar(<span class="string">'0'</span>)</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><h4 id="æ–­è¨€assert"><a href="#æ–­è¨€assert" class="headerlink" title="æ–­è¨€assert"></a>æ–­è¨€<code>assert</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># err.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(s)</span>:</span></span><br><span class="line">    n = int(s)</span><br><span class="line">    <span class="keyword">assert</span> n != <span class="number">0</span>, <span class="string">'n is zero!'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span> / n</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    foo(<span class="string">'0'</span>)</span><br></pre></td></tr></table></figure>
<p><code>assert</code>è¯­å¥æœ¬èº«ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ<code>AssertionError</code></p>
<p>å¯ä»¥ç”¨<code>-O</code>å‚æ•°å…³é—­ assertï¼š<code>python -O err.py</code></p>
<h4 id="æ—¥å¿—logging"><a href="#æ—¥å¿—logging" class="headerlink" title="æ—¥å¿—logging"></a>æ—¥å¿—<code>logging</code></h4><p>å‡ ä¸ªçº§åˆ«ï¼š<code>debug</code>ï¼Œ<code>info</code>ï¼Œ<code>warning</code>ï¼Œ<code>error</code>ã€‚</p>
<p>å¯ä»¥æŒ‡å®šçº§åˆ«ï¼Œå½“æˆ‘ä»¬æŒ‡å®š<code>level=INFO</code>æ—¶ï¼Œ<code>logging.debug</code>å°±ä¸èµ·ä½œç”¨äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(level=logging.INFO)</span><br></pre></td></tr></table></figure>
<h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><h4 id="unittestæ¨¡å—"><a href="#unittestæ¨¡å—" class="headerlink" title="unittestæ¨¡å—"></a><code>unittest</code>æ¨¡å—</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mydict_test.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> mydict <span class="keyword">import</span> Dict</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestDict</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_init</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict(a=<span class="number">1</span>, b=<span class="string">'test'</span>)</span><br><span class="line">        self.assertEquals(d.a, <span class="number">1</span>)</span><br><span class="line">        self.assertEquals(d.b, <span class="string">'test'</span>)</span><br><span class="line">        self.assertTrue(isinstance(d, dict))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_key</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict()</span><br><span class="line">        d[<span class="string">'key'</span>] = <span class="string">'value'</span></span><br><span class="line">        self.assertEquals(d.key, <span class="string">'value'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_attr</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict()</span><br><span class="line">        d.key = <span class="string">'value'</span></span><br><span class="line">        self.assertTrue(<span class="string">'key'</span> <span class="keyword">in</span> d)</span><br><span class="line">        self.assertEquals(d[<span class="string">'key'</span>], <span class="string">'value'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_keyerror</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict()</span><br><span class="line">        <span class="keyword">with</span> self.assertRaises(KeyError):</span><br><span class="line">            value = d[<span class="string">'empty'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_attrerror</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict()</span><br><span class="line">        <span class="keyword">with</span> self.assertRaises(AttributeError):</span><br><span class="line">            value = d.empty</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æµ‹è¯•ç±»ï¼šä»<code>unittest.TestCase</code>ç»§æ‰¿ã€‚</p>
</li>
<li><p>ä»¥<code>test</code>å¼€å¤´çš„æ–¹æ³•æ‰ä¼šè¢«è®¤ä¸ºæ˜¯æµ‹è¯•æ–¹æ³•ï¼Œæ‰èƒ½è¢«æ‰§è¡Œ</p>
</li>
<li><p>ç”¨æ–­è¨€æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæœŸæœ›ï¼Œ<code>assertEquals()</code> <code>assertTrue()</code> ï¼Œä»¥åŠæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> self.assertRaises(AttributeError):</span><br><span class="line">    value = d.empty</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="è¿è¡Œå•å…ƒæµ‹è¯•"><a href="#è¿è¡Œå•å…ƒæµ‹è¯•" class="headerlink" title="è¿è¡Œå•å…ƒæµ‹è¯•"></a>è¿è¡Œå•å…ƒæµ‹è¯•</h4><ol>
<li><p>åœ¨å•å…ƒæµ‹è¯•æ–‡ä»¶<code>mydict_test.py</code>ä¸‹åŠ ä¸Šä¸¤è¡Œä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥åƒæ­£å¸¸è„šæœ¬ä¸€æ ·è¿è¡Œäº†<code>$ python mydict_test.py</code></p>
</li>
<li><p>ç”¨å‚æ•°<code>-m unittest</code>ï¼š<code>$ python -m unittest mydict_test.py</code></p>
</li>
</ol>
<h4 id="setUp-å’ŒtearDown"><a href="#setUp-å’ŒtearDown" class="headerlink" title="setUp()å’ŒtearDown()"></a><code>setUp()</code>å’Œ<code>tearDown()</code></h4><p>åˆ†åˆ«ä¼šåœ¨æ¯è°ƒç”¨ä¸€ä¸ªæµ‹è¯•æ–¹æ³•çš„å‰ååˆ†åˆ«è¢«æ‰§è¡Œã€‚</p>
<h3 id="æ–‡æ¡£æµ‹è¯•"><a href="#æ–‡æ¡£æµ‹è¯•" class="headerlink" title="æ–‡æ¡£æµ‹è¯•"></a>æ–‡æ¡£æµ‹è¯•</h3><p><code>doctest</code>æ¨¡å—ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mydict.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dict</span><span class="params">(dict)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    Simple dict but also support access as x.y style.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d1 = Dict()</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d1['x'] = 100</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d1.x</span></span><br><span class="line"><span class="string">    100</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d1.y = 200</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d1['y']</span></span><br><span class="line"><span class="string">    200</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d2 = Dict(a=1, b=2, c='3')</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d2.c</span></span><br><span class="line"><span class="string">    '3'</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d2['empty']</span></span><br><span class="line"><span class="string">    Traceback (most recent call last):</span></span><br><span class="line"><span class="string">        ...</span></span><br><span class="line"><span class="string">    KeyError: 'empty'</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; d2.empty</span></span><br><span class="line"><span class="string">    Traceback (most recent call last):</span></span><br><span class="line"><span class="string">        ...</span></span><br><span class="line"><span class="string">    AttributeError: 'Dict' object has no attribute 'empty'</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **kw)</span>:</span></span><br><span class="line">        super(Dict, self).__init__(**kw)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> self[key]</span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            <span class="keyword">raise</span> AttributeError(<span class="string">r"'Dict' object has no attribute '%s'"</span> % key)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        self[key] = value</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">import</span> doctest</span><br><span class="line">    doctest.testmod()</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæµ‹è¯•ï¼š<code>python mydict.py</code></p>
<h2 id="IO-ç¼–ç¨‹"><a href="#IO-ç¼–ç¨‹" class="headerlink" title="IO ç¼–ç¨‹"></a>IO ç¼–ç¨‹</h2><h3 id="æ–‡ä»¶è¯»å†™"><a href="#æ–‡ä»¶è¯»å†™" class="headerlink" title="æ–‡ä»¶è¯»å†™"></a>æ–‡ä»¶è¯»å†™</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'/Users/michael/test.txt'</span>, <span class="string">'r'</span>)</span><br><span class="line">f.read()	<span class="comment"># ä¸€æ¬¡è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œç”¨ä¸€ä¸ªstrå¯¹è±¡è¡¨ç¤º</span></span><br><span class="line">f.close()	<span class="comment"># æ–‡ä»¶ä½¿ç”¨å®Œæ¯•åå¿…é¡»å…³é—­</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæ–‡ä»¶è¯»å†™æ—¶éƒ½æœ‰å¯èƒ½äº§ç”Ÿ<code>IOError</code>ï¼Œä¸€æ—¦å‡ºé”™ï¼Œåé¢çš„<code>f.close()</code>å°±ä¸ä¼šè°ƒç”¨ã€‚æœ€å¥½ç”¨<code>try...finally</code>æ¥å†™ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'/path/to/file'</span>, <span class="string">'r'</span>)</span><br><span class="line">    <span class="keyword">print</span> f.read()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>
<p>Python å¼•å…¥äº†<code>with</code>è¯­å¥æ¥å¸®åŠ©è°ƒç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'/path/to/file'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">print</span> f.read()</span><br></pre></td></tr></table></figure>
<ul>
<li><code>read(size)</code>å¯ä»¥è¯»å– size ä¸ªå­—èŠ‚çš„å†…å®¹</li>
<li><code>readline()</code>å¯ä»¥è¯»å–ä¸€è¡Œå†…å®¹</li>
<li><code>readlines()</code>ä¸€æ¬¡è¯»å–æ‰€æœ‰å†…å®¹å¹¶æŒ‰è¡Œè¿”å›<code>list</code></li>
</ul>
<h3 id="æ“ä½œæ–‡ä»¶å’Œç›®å½•"><a href="#æ“ä½œæ–‡ä»¶å’Œç›®å½•" class="headerlink" title="æ“ä½œæ–‡ä»¶å’Œç›®å½•"></a>æ“ä½œæ–‡ä»¶å’Œç›®å½•</h3><p><code>os</code>æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># ç³»ç»Ÿ</span></span><br><span class="line">os.name				<span class="comment"># æ“ä½œç³»ç»Ÿåå­—ï¼Œposix-&gt;(Linux/Unix/Mac OS X)ï¼Œnt-&gt;Windows</span></span><br><span class="line">os.uname()			<span class="comment"># è¯¦ç»†ç³»ç»Ÿä¿¡æ¯ï¼ŒWindowsä¸æä¾›è¯¥æ¥å£</span></span><br><span class="line">os.environ			<span class="comment"># ç³»ç»Ÿç¯å¢ƒè¿æ¢</span></span><br><span class="line">os.getenv(<span class="string">'PATH'</span>)	<span class="comment"># è·å–æŸä¸ªç¯å¢ƒå˜é‡çš„å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line">os.path.abspath(<span class="string">'.'</span>)	<span class="comment"># æŸ¥çœ‹å½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">os.mkdir(os.path.join(os.path.abspath(<span class="string">'.'</span>), <span class="string">'testdir'</span>))	<span class="comment"># åˆ›å»ºæ–°ç›®å½•</span></span><br><span class="line">os.rmdir(os.path.join(os.path.abspath(<span class="string">'.'</span>), <span class="string">'testdir'</span>))	<span class="comment"># åˆ é™¤è¯¥ç›®å½•</span></span><br><span class="line"><span class="comment"># æŠŠä¸¤ä¸ªè·¯å¾„åˆæˆä¸€ä¸ªæ—¶ï¼Œä¸è¦ç›´æ¥æ‹¼å­—ç¬¦ä¸²ï¼Œè€Œè¦é€šè¿‡os.path.join()å‡½æ•°</span></span><br><span class="line"><span class="comment"># è¦æ‹†åˆ†è·¯å¾„æ—¶ï¼Œä¹Ÿä¸è¦ç›´æ¥å»æ‹†å­—ç¬¦ä¸²ï¼Œè€Œè¦é€šè¿‡os.path.split()å‡½æ•°</span></span><br><span class="line"><span class="comment"># è¿™æ ·å¯ä»¥æ­£ç¡®å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># os.path.splitext()å¯ä»¥ç›´æ¥è®©ä½ å¾—åˆ°æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">os.path.splitext(<span class="string">'/path/to/file.txt'</span>) <span class="comment"># ('/path/to/file', '.txt')</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>os</code>æ¨¡å—ä¸æä¾›æ‹·è´æ–‡ä»¶çš„æ¥å£ï¼Œè€Œ<code>shutil</code>æ¨¡å—æä¾›äº†<code>copyfile()</code>çš„å‡½æ•°ã€‚</li>
</ul>
<h3 id="åºåˆ—åŒ–ï¼ˆpicklingï¼‰"><a href="#åºåˆ—åŒ–ï¼ˆpicklingï¼‰" class="headerlink" title="åºåˆ—åŒ–ï¼ˆpicklingï¼‰"></a>åºåˆ—åŒ–ï¼ˆpicklingï¼‰</h3><p>åºåˆ—åŒ–ï¼šæŠŠå˜é‡ä»å†…å­˜ä¸­å˜æˆå¯å­˜å‚¨æˆ–ä¼ è¾“çš„è¿‡ç¨‹ã€‚</p>
<p><code>cPickle</code>å’Œ<code>pickle</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="keyword">import</span> pickle</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">d = dict(name=<span class="string">'Bob'</span>, age=<span class="number">20</span>, score=<span class="number">88</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pickle.dumps()æ–¹æ³•æŠŠä»»æ„å¯¹è±¡åºåˆ—åŒ–æˆä¸€ä¸ªstr</span></span><br><span class="line">s = pickle.dumps(d) <span class="comment"># "(dp0\nS'age'\np1\nI20\nsS'score'\np2\nI88\nsS'name'\np3\nS'Bob'\np4\ns."</span></span><br><span class="line"><span class="comment"># pickle.load(s() ååºåˆ—åŒ–</span></span><br><span class="line">pickle.loads(s) <span class="comment"># &#123;'age': 20, 'score': 88, 'name': 'Bob'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pickle.dump()ç›´æ¥æŠŠå¯¹è±¡åºåˆ—åŒ–åå†™å…¥ä¸€ä¸ªfile-like Object</span></span><br><span class="line">f = open(<span class="string">'dump.txt'</span>, <span class="string">'wb'</span>)</span><br><span class="line">s = pickle.dump(d, f)</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment"># pickle.load() ååºåˆ—åŒ–</span></span><br><span class="line">f = open(<span class="string">'dump.txt'</span>, <span class="string">'rb'</span>)</span><br><span class="line">pickle.load(f)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>å†…ç½®çš„<code>json</code>æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">d = dict(name=<span class="string">'Bob'</span>, age=<span class="number">20</span>, score=<span class="number">88</span>)</span><br><span class="line">json.dumps(d) <span class="comment"># '&#123;"age": 20, "score": 88, "name": "Bob"&#125;'</span></span><br><span class="line"><span class="comment"># dumpåˆ™å¯ä»¥ç”¨äºå†™å…¥</span></span><br><span class="line"><span class="comment"># loadsã€loadç­‰</span></span><br></pre></td></tr></table></figure>
<h4 id="å®šåˆ¶-JSON-åºåˆ—åŒ–"><a href="#å®šåˆ¶-JSON-åºåˆ—åŒ–" class="headerlink" title="å®šåˆ¶ JSON åºåˆ—åŒ–"></a>å®šåˆ¶ JSON åºåˆ—åŒ–</h4><p>å°†æŸä¸ª class çš„å®ä¾‹åºåˆ—åŒ–æˆ JSONï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, score)</span>:</span></span><br><span class="line">		self.name = name</span><br><span class="line">		self.age = age</span><br><span class="line">		self.score = score</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">student2dict</span><span class="params">(std)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="string">'name'</span>: std.name,</span><br><span class="line">			<span class="string">'age'</span>: std.age,</span><br><span class="line">			<span class="string">'score'</span>: std.score</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">s = Student(<span class="string">'Bob'</span>, <span class="number">20</span>, <span class="number">88</span>)</span><br><span class="line">print(json.dumps(s, default=student2dict))</span><br></pre></td></tr></table></figure>
<ul>
<li>å·æ‡’çš„æ–¹æ³•ï¼šåˆ©ç”¨<code>__dict__</code>å±æ€§ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª<code>dict</code>ï¼Œç”¨æ¥å­˜å‚¨å®ä¾‹å˜é‡ã€‚</li>
</ul>
<p>ååºåˆ—åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dict2student</span><span class="params">(d)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> Student(d[<span class="string">'name'</span>], d[<span class="string">'age'</span>], d[<span class="string">'score'</span>])</span><br><span class="line"></span><br><span class="line">json_str = <span class="string">'&#123;"age": 20, "score": 88, "name": "Bob"&#125;'</span></span><br><span class="line">print(json.loads(json_str, object_hook=dict2student))</span><br></pre></td></tr></table></figure>
<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h2><h3 id="å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰"><a href="#å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰" class="headerlink" title="å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰"></a>å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰</h3><p>Unix/Linux æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ª<code>fork()</code>ç³»ç»Ÿè°ƒç”¨ï¼Œå­è¿›ç¨‹æ°¸è¿œè¿”å›<code>0</code>ï¼Œè€Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„ IDã€‚å­è¿›ç¨‹åªéœ€è¦è°ƒç”¨<code>getppid()</code>å°±å¯ä»¥æ‹¿åˆ°çˆ¶è¿›ç¨‹çš„ IDã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># multiprocessing.py</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'Process (%s) start...'</span> % os.getpid()</span><br><span class="line">pid = os.fork()</span><br><span class="line"><span class="keyword">if</span> pid==<span class="number">0</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'I am child process (%s) and my parent is %s.'</span> % (os.getpid(), os.getppid())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'I (%s) just created a child process (%s).'</span> % (os.getpid(), pid)</span><br></pre></td></tr></table></figure>
<h4 id="multiprocessingæ¨¡å—-è·¨å¹³å°"><a href="#multiprocessingæ¨¡å—-è·¨å¹³å°" class="headerlink" title="multiprocessingæ¨¡å— - è·¨å¹³å°"></a><code>multiprocessing</code>æ¨¡å— - è·¨å¹³å°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_proc</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Run child process %s (%s)...'</span> % (name, os.getpid())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Parent process %s.'</span> % os.getpid()</span><br><span class="line">    p = Process(target=run_proc, args=(<span class="string">'test'</span>,))</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Process will start.'</span></span><br><span class="line">    p.start()</span><br><span class="line">    p.join() <span class="comment"># join()æ–¹æ³•å¯ä»¥ç­‰å¾…å­è¿›ç¨‹ç»“æŸåå†ç»§ç»­å¾€ä¸‹è¿è¡Œï¼Œé€šå¸¸ç”¨äºè¿›ç¨‹é—´çš„åŒæ­¥ã€‚</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Process end.'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Parent process 928.</span><br><span class="line">Process will start.</span><br><span class="line">Run child process test (929)...</span><br><span class="line">Process end.</span><br></pre></td></tr></table></figure>
<h4 id="Pool-è¿›ç¨‹æ± "><a href="#Pool-è¿›ç¨‹æ± " class="headerlink" title="Pool è¿›ç¨‹æ± "></a>Pool è¿›ç¨‹æ± </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os, time, random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">long_time_task</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Run task %s (%s)...'</span> % (name, os.getpid())</span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(random.random() * <span class="number">3</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Task %s runs %0.2f seconds.'</span> % (name, (end - start))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Parent process %s.'</span> % os.getpid()</span><br><span class="line">    p = Pool()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        p.apply_async(long_time_task, args=(i,))</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Waiting for all subprocesses done...'</span></span><br><span class="line">    p.close()	<span class="comment"># è°ƒç”¨close()ä¹‹åå°±ä¸èƒ½ç»§ç»­æ·»åŠ æ–°çš„Processäº†</span></span><br><span class="line">    p.join()	<span class="comment"># è°ƒç”¨join()ä¹‹å‰ï¼Œä¸€å®šè¦è°ƒç”¨close()</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'All subprocesses done.'</span></span><br></pre></td></tr></table></figure>
<p><code>Pool</code>é»˜è®¤å¤§å°æ˜¯ CPU æ ¸æ•°ï¼Œå½“åˆ›å»ºå¤šäº<code>Pool</code>å¤§å°çš„è¿›ç¨‹æ•°æ—¶ï¼Œåé¢çš„è¿›ç¨‹å°±ä¼šç­‰å¾…å‰é¢çš„è¿›ç¨‹æ‰§è¡Œå®Œæˆå†æ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Parent process 669.</span><br><span class="line">Waiting for all subprocesses done...</span><br><span class="line">Run task 0 (671)...</span><br><span class="line">Run task 1 (672)...</span><br><span class="line">Run task 2 (673)...</span><br><span class="line">Run task 3 (674)...</span><br><span class="line">Task 2 runs 0.14 seconds.</span><br><span class="line">Run task 4 (673)...</span><br><span class="line">Task 1 runs 0.27 seconds.</span><br><span class="line">Task 3 runs 0.86 seconds.</span><br><span class="line">Task 0 runs 1.41 seconds.</span><br><span class="line">Task 4 runs 1.91 seconds.</span><br><span class="line">All subprocesses done.</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è®¾ç½®<code>p = Pool(5)</code>åŒæ—¶è¿è¡Œ 5 ä¸ªè¿›ç¨‹ã€‚</p>
<h4 id="è¿›ç¨‹é—´é€šè®¯"><a href="#è¿›ç¨‹é—´é€šè®¯" class="headerlink" title="è¿›ç¨‹é—´é€šè®¯"></a>è¿›ç¨‹é—´é€šè®¯</h4><p><code>Queue</code>ç­–ç•¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Queue</span><br><span class="line"><span class="keyword">import</span> os, time, random</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™æ•°æ®è¿›ç¨‹æ‰§è¡Œçš„ä»£ç :</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(q)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Put %s to queue...'</span> % value</span><br><span class="line">        q.put(value)</span><br><span class="line">        time.sleep(random.random())</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»æ•°æ®è¿›ç¨‹æ‰§è¡Œçš„ä»£ç :</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(q)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        value = q.get(<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'Get %s from queue.'</span> % value</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># çˆ¶è¿›ç¨‹åˆ›å»ºQueueï¼Œå¹¶ä¼ ç»™å„ä¸ªå­è¿›ç¨‹ï¼š</span></span><br><span class="line">    q = Queue()</span><br><span class="line">    pw = Process(target=write, args=(q,))</span><br><span class="line">    pr = Process(target=read, args=(q,))</span><br><span class="line">    <span class="comment"># å¯åŠ¨å­è¿›ç¨‹pwï¼Œå†™å…¥:</span></span><br><span class="line">    pw.start()</span><br><span class="line">    <span class="comment"># å¯åŠ¨å­è¿›ç¨‹prï¼Œè¯»å–:</span></span><br><span class="line">    pr.start()</span><br><span class="line">    <span class="comment"># ç­‰å¾…pwç»“æŸ:</span></span><br><span class="line">    pw.join()</span><br><span class="line">    <span class="comment"># prè¿›ç¨‹é‡Œæ˜¯æ­»å¾ªç¯ï¼Œæ— æ³•ç­‰å¾…å…¶ç»“æŸï¼Œåªèƒ½å¼ºè¡Œç»ˆæ­¢:</span></span><br><span class="line">    pr.terminate()</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰<code>Pipes</code>ç­‰ç­–ç•¥</p>
<h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><p><code>threading</code>é«˜çº§æ¨¡å—å¯¹<code>thread</code>æ¨¡å—è¿›è¡Œäº†å°è£…ï¼Œè¾ƒå¸¸ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time, threading</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç :</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loop</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'thread %s is running...'</span> % threading.current_thread().name</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="number">5</span>:</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'thread %s &gt;&gt;&gt; %s'</span> % (threading.current_thread().name, n)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'thread %s ended.'</span> % threading.current_thread().name</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'thread %s is running...'</span> % threading.current_thread().name</span><br><span class="line">t = threading.Thread(target=loop, name=<span class="string">'LoopThread'</span>)</span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br><span class="line"><span class="keyword">print</span> <span class="string">'thread %s ended.'</span> % threading.current_thread().name</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">thread MainThread is running...</span><br><span class="line">thread LoopThread is running...</span><br><span class="line">thread LoopThread &gt;&gt;&gt; 1</span><br><span class="line">thread LoopThread &gt;&gt;&gt; 2</span><br><span class="line">thread LoopThread &gt;&gt;&gt; 3</span><br><span class="line">thread LoopThread &gt;&gt;&gt; 4</span><br><span class="line">thread LoopThread &gt;&gt;&gt; 5</span><br><span class="line">thread LoopThread ended.</span><br><span class="line">thread MainThread ended.</span><br></pre></td></tr></table></figure>
<h4 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time, threading</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡å®šè¿™æ˜¯ä½ çš„é“¶è¡Œå­˜æ¬¾:</span></span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="comment"># å…ˆå­˜åå–ï¼Œç»“æœåº”è¯¥ä¸º0:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    balance = balance + n</span><br><span class="line">    balance = balance - n</span><br><span class="line"></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_thread</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        <span class="comment"># å…ˆè¦è·å–é”:</span></span><br><span class="line">        lock.acquire()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ”¾å¿ƒåœ°æ”¹å§:</span></span><br><span class="line">            change_it(n)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment"># æ”¹å®Œäº†ä¸€å®šè¦é‡Šæ”¾é”:</span></span><br><span class="line">            lock.release()</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=run_thread, args=(<span class="number">5</span>,))</span><br><span class="line">t2 = threading.Thread(target=run_thread, args=(<span class="number">8</span>,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line"><span class="keyword">print</span> balance</span><br></pre></td></tr></table></figure>
<h4 id="å¤šæ ¸-CPU"><a href="#å¤šæ ¸-CPU" class="headerlink" title="å¤šæ ¸ CPU"></a>å¤šæ ¸ CPU</h4><p>Python å› ä¸ºå­˜åœ¨ global interpret lockï¼ˆGIL é”ï¼‰çš„å…³ç³»ï¼Œè™½ç„¶å¯ä»¥å¤šçº¿ç¨‹æ‰§è¡Œï¼Œä½†æ— æ³•çœŸæ­£åˆ©ç”¨å¤šæ ¸ã€‚æ¯ä¸ªè¿›ç¨‹æœ€å¤šåˆ©ç”¨ 2 ä¸¤ä¸ªæ ¸ã€‚</p>
<h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><p>ä¸ºæ¯ä¸ªçº¿ç¨‹å•ç‹¬å»ºç«‹ä½œç”¨åŸŸ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå…¨å±€ThreadLocalå¯¹è±¡:</span></span><br><span class="line">local_school = threading.local()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_student</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Hello, %s (in %s)'</span> % (local_school.student, threading.current_thread().name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_thread</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># ç»‘å®šThreadLocalçš„student:</span></span><br><span class="line">    local_school.student = name</span><br><span class="line">    process_student()</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target= process_thread, args=(<span class="string">'Alice'</span>,), name=<span class="string">'Thread-A'</span>)</span><br><span class="line">t2 = threading.Thread(target= process_thread, args=(<span class="string">'Bob'</span>,), name=<span class="string">'Thread-B'</span>)</span><br><span class="line">t1.start() <span class="comment"># Hello, Alice (in Thread-A)</span></span><br><span class="line">t2.start() <span class="comment"># Hello, Bob (in Thread-B)</span></span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
    
    
    <div class="index-right">
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-å­¦ä¹ ç¬”è®°åŸºç¡€"><span class="toc-text">Python å­¦ä¹ ç¬”è®°åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºç¡€"><span class="toc-text">åŸºç¡€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡½æ•°"><span class="toc-text">å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é«˜çº§ç‰¹æ€§"><span class="toc-text">é«˜çº§ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ‡ç‰‡ï¼ˆSlice-ï¼‰"><span class="toc-text">åˆ‡ç‰‡ï¼ˆSlice ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿­ä»£ï¼ˆIterationï¼‰"><span class="toc-text">è¿­ä»£ï¼ˆIterationï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList-Comprehensionsï¼‰"><span class="toc-text">åˆ—è¡¨ç”Ÿæˆå¼ï¼ˆList Comprehensionsï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰"><span class="toc-text">ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional-Programmingï¼‰"><span class="toc-text">å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é«˜é˜¶å‡½æ•°"><span class="toc-text">é«˜é˜¶å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿”å›å‡½æ•°"><span class="toc-text">è¿”å›å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰"><span class="toc-text">åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è£…é¥°å™¨ï¼ˆDecoratorï¼‰"><span class="toc-text">è£…é¥°å™¨ï¼ˆDecoratorï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åå‡½æ•°ï¼ˆPartial-functionï¼‰"><span class="toc-text">åå‡½æ•°ï¼ˆPartial functionï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¨¡å—"><span class="toc-text">æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¼•å…¥æ¨¡å—"><span class="toc-text">å¼•å…¥æ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—"><span class="toc-text">å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#future-æ¨¡å—"><span class="toc-text">__future__æ¨¡å—</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é¢å‘å¯¹è±¡ç¼–ç¨‹"><span class="toc-text">é¢å‘å¯¹è±¡ç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç±»å’Œå®ä¾‹"><span class="toc-text">ç±»å’Œå®ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®é™åˆ¶"><span class="toc-text">è®¿é—®é™åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»§æ‰¿ä¸å¤šæ€"><span class="toc-text">ç»§æ‰¿ä¸å¤šæ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è·å–å¯¹è±¡ä¿¡æ¯"><span class="toc-text">è·å–å¯¹è±¡ä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slots"><span class="toc-text">__slots__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#property"><span class="toc-text">@property</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¤šé‡ç»§æ‰¿"><span class="toc-text">å¤šé‡ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®šåˆ¶ç±»"><span class="toc-text">å®šåˆ¶ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…ƒç±»"><span class="toc-text">å…ƒç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•"><span class="toc-text">é”™è¯¯ã€è°ƒè¯•å’Œæµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é”™è¯¯å¤„ç†"><span class="toc-text">é”™è¯¯å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#try-except-finally"><span class="toc-text">try...except...finally...</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logging"><span class="toc-text">logging</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è‡ªå·±ç¼–å†™é”™è¯¯"><span class="toc-text">è‡ªå·±ç¼–å†™é”™è¯¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸"><span class="toc-text">ç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è°ƒè¯•"><span class="toc-text">è°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ–­è¨€assert"><span class="toc-text">æ–­è¨€assert</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ—¥å¿—logging"><span class="toc-text">æ—¥å¿—logging</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å•å…ƒæµ‹è¯•"><span class="toc-text">å•å…ƒæµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#unittestæ¨¡å—"><span class="toc-text">unittestæ¨¡å—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è¿è¡Œå•å…ƒæµ‹è¯•"><span class="toc-text">è¿è¡Œå•å…ƒæµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setUp-å’ŒtearDown"><span class="toc-text">setUp()å’ŒtearDown()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–‡æ¡£æµ‹è¯•"><span class="toc-text">æ–‡æ¡£æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO-ç¼–ç¨‹"><span class="toc-text">IO ç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–‡ä»¶è¯»å†™"><span class="toc-text">æ–‡ä»¶è¯»å†™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ“ä½œæ–‡ä»¶å’Œç›®å½•"><span class="toc-text">æ“ä½œæ–‡ä»¶å’Œç›®å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åºåˆ—åŒ–ï¼ˆpicklingï¼‰"><span class="toc-text">åºåˆ—åŒ–ï¼ˆpicklingï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JSON"><span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å®šåˆ¶-JSON-åºåˆ—åŒ–"><span class="toc-text">å®šåˆ¶ JSON åºåˆ—åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿›ç¨‹å’Œçº¿ç¨‹"><span class="toc-text">è¿›ç¨‹å’Œçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰"><span class="toc-text">å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#multiprocessingæ¨¡å—-è·¨å¹³å°"><span class="toc-text">multiprocessingæ¨¡å— - è·¨å¹³å°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pool-è¿›ç¨‹æ± "><span class="toc-text">Pool è¿›ç¨‹æ± </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è¿›ç¨‹é—´é€šè®¯"><span class="toc-text">è¿›ç¨‹é—´é€šè®¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¤šçº¿ç¨‹"><span class="toc-text">å¤šçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Lock"><span class="toc-text">Lock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¤šæ ¸-CPU"><span class="toc-text">å¤šæ ¸ CPU</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ThreadLocal"><span class="toc-text">ThreadLocal</span></a></li></ol></li></ol></li></ol>
</div>
    </div>
    
</div>

<footer class="footer">
  <ul class="list-inline text-center">
         
  </ul>
  
  <p>
    <a href="http://panjiacheng.site">@Jiacheng Pan</a> Created By
    <a href="https://hexo.io/">Hexo</a> Theme
    <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a>
    <a href="https://github.com/aircloud">@Xiaotao</a>
  </p>
</footer>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->
<script src="https://cdn.bootcdn.net/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/blog/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/blog/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script type="text/javascript">
       (function() {
           if (typeof LivereTower === 'function') { return; }

           var j, d = document.getElementById('lv-container');

           d.setAttribute('data-id','city');
           d.setAttribute('data-uid' , 'MTAyMC8yOTk2MC82NTI1');

           j = document.createElement('script');
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           d.appendChild(j);
       })();
    </script>
    <noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
    </div>

</html>
